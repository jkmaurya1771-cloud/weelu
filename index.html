<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Weelu</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet"/>
<style>
  :root {
    --orange: #FF5C00; --yellow: #FFD600; --pink: #FF2D78;
    --blue: #0057FF; --dark: #0A0A0A; --card: #141414;
    --text: #F5F5F5; --muted: #888; --border: #222;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--dark); color:var(--text); font-family:'DM Sans',sans-serif; overflow-x:hidden; }

  /* NAV */
  nav { display:flex; align-items:center; justify-content:space-between; padding:20px 40px; border-bottom:1px solid var(--border); position:sticky; top:0; z-index:100; background:rgba(10,10,10,0.95); backdrop-filter:blur(10px); }
  .logo { font-family:'Syne',sans-serif; font-size:1.6rem; font-weight:800; color:var(--text); text-decoration:none; }
  .logo span { color:var(--orange); }
  .nav-links { display:flex; gap:30px; list-style:none; }
  .nav-links a { color:var(--muted); text-decoration:none; font-size:0.95rem; transition:color 0.2s; }
  .nav-links a:hover { color:var(--text); }
  .nav-right { display:flex; gap:12px; align-items:center; }
  .btn { padding:10px 22px; border-radius:50px; font-family:'DM Sans',sans-serif; font-weight:600; font-size:0.9rem; cursor:pointer; border:none; transition:all 0.2s; }
  .btn-outline { background:transparent; border:1.5px solid var(--border); color:var(--text); }
  .btn-primary { background:var(--orange); color:#fff; }
  .btn-lg { padding:14px 32px; font-size:1rem; }
  .hamburger { display:none; flex-direction:column; gap:5px; cursor:pointer; padding:4px; }
  .hamburger span { display:block; width:24px; height:2px; background:var(--text); border-radius:2px; transition:all 0.3s; }
  .hamburger.open span:nth-child(1) { transform:translateY(7px) rotate(45deg); }
  .hamburger.open span:nth-child(2) { opacity:0; }
  .hamburger.open span:nth-child(3) { transform:translateY(-7px) rotate(-45deg); }
  .mobile-menu { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.97); z-index:200; flex-direction:column; align-items:center; justify-content:center; gap:32px; }
  .mobile-menu.open { display:flex; }
  .mobile-menu a { font-family:'Syne',sans-serif; font-size:2rem; font-weight:800; color:var(--text); text-decoration:none; }
  .mobile-menu-close { position:absolute; top:20px; right:24px; font-size:2rem; color:var(--muted); cursor:pointer; background:none; border:none; }

  /* HERO */
  .hero { padding:100px 40px 80px; text-align:center; position:relative; overflow:hidden; }
  .hero::before { content:''; position:absolute; top:-200px; left:50%; transform:translateX(-50%); width:700px; height:700px; background:radial-gradient(circle,rgba(255,92,0,0.15) 0%,transparent 70%); pointer-events:none; }
  .hero-tag { display:inline-block; background:rgba(255,92,0,0.15); border:1px solid rgba(255,92,0,0.3); color:var(--orange); padding:6px 16px; border-radius:50px; font-size:0.8rem; font-weight:600; letter-spacing:1px; text-transform:uppercase; margin-bottom:28px; animation:fadeUp 0.6s ease both; }
  .hero h1 { font-family:'Syne',sans-serif; font-size:clamp(2.8rem,7vw,5.5rem); font-weight:800; line-height:1.05; letter-spacing:-2px; max-width:900px; margin:0 auto 24px; animation:fadeUp 0.6s 0.1s ease both; }
  .hero h1 .accent { color:var(--orange); }
  .hero h1 .accent2 { color:var(--yellow); }
  .hero p { color:var(--muted); font-size:1.15rem; max-width:560px; margin:0 auto 40px; line-height:1.7; animation:fadeUp 0.6s 0.2s ease both; }
  .hero-actions { display:flex; gap:14px; justify-content:center; flex-wrap:wrap; animation:fadeUp 0.6s 0.3s ease both; }

  /* SEARCH */
  .search-bar { max-width:660px; margin:60px auto 0; display:flex; background:#1a1a1a; border:1.5px solid var(--border); border-radius:16px; overflow:hidden; animation:fadeUp 0.6s 0.4s ease both; transition:border-color 0.2s; }
  .search-bar:focus-within { border-color:var(--orange); }
  .search-bar input { flex:1; background:none; border:none; outline:none; padding:18px 24px; color:var(--text); font-size:1rem; font-family:'DM Sans',sans-serif; }
  .search-bar input::placeholder { color:var(--muted); }
  .search-bar button { background:var(--orange); border:none; color:#fff; padding:16px 28px; font-family:'Syne',sans-serif; font-weight:700; cursor:pointer; font-size:0.95rem; }

  /* STATS */
  .stats { display:flex; justify-content:center; gap:60px; padding:50px 40px; border-top:1px solid var(--border); border-bottom:1px solid var(--border); flex-wrap:wrap; }
  .stat { text-align:center; }
  .stat-num { font-family:'Syne',sans-serif; font-size:2.4rem; font-weight:800; color:var(--orange); }
  .stat-label { color:var(--muted); font-size:0.85rem; margin-top:4px; }

  /* SECTIONS */
  .section { padding:70px 40px; }
  .section-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:36px; }
  .section-title { font-family:'Syne',sans-serif; font-size:1.8rem; font-weight:800; }
  .see-all { color:var(--orange); text-decoration:none; font-size:0.9rem; font-weight:600; }

  /* CATEGORIES */
  .categories { display:flex; gap:12px; flex-wrap:wrap; }
  .cat-pill { padding:10px 22px; border-radius:50px; border:1.5px solid var(--border); background:var(--card); cursor:pointer; font-family:'DM Sans',sans-serif; font-size:0.9rem; color:var(--text); transition:all 0.2s; }
  .cat-pill:hover, .cat-pill.active { border-color:var(--orange); color:var(--orange); background:rgba(255,92,0,0.08); font-weight:600; }

  /* PRODUCTS */
  .products-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:24px; }
  .product-card { background:var(--card); border:1.5px solid var(--border); border-radius:20px; overflow:hidden; transition:all 0.25s; cursor:pointer; position:relative; }
  .product-card:hover { border-color:var(--orange); transform:translateY(-4px); box-shadow:0 20px 50px rgba(255,92,0,0.12); }
  .product-img { width:100%; aspect-ratio:1/0.75; display:flex; align-items:center; justify-content:center; font-size:4rem; position:relative; background:linear-gradient(135deg,#1a1a1a,#222); }
  .badge { position:absolute; top:14px; left:14px; padding:4px 12px; border-radius:50px; font-size:0.72rem; font-weight:700; text-transform:uppercase; letter-spacing:0.5px; }
  .badge-affiliate { background:var(--blue); color:#fff; }
  .badge-own { background:var(--pink); color:#fff; }
  .badge-hot { position:absolute; top:14px; right:14px; background:var(--orange); color:#fff; padding:4px 10px; border-radius:50px; font-size:0.72rem; font-weight:700; }
  .product-body { padding:20px; }
  .product-cat { font-size:0.75rem; color:var(--orange); font-weight:600; text-transform:uppercase; letter-spacing:0.5px; margin-bottom:8px; }
  .product-name { font-family:'Syne',sans-serif; font-size:1.05rem; font-weight:700; margin-bottom:8px; line-height:1.3; }
  .product-desc { color:var(--muted); font-size:0.85rem; line-height:1.5; margin-bottom:16px; }
  .product-footer { display:flex; align-items:center; justify-content:space-between; }
  .product-price { font-family:'Syne',sans-serif; font-size:1.3rem; font-weight:800; }
  .product-price .old { font-size:0.8rem; color:var(--muted); text-decoration:line-through; font-family:'DM Sans'; font-weight:400; margin-left:6px; }
  .product-commission { font-size:0.75rem; color:#00D68F; font-weight:600; }
  .add-btn { background:var(--orange); border:none; color:#fff; padding:10px 18px; border-radius:10px; font-weight:600; font-size:0.85rem; cursor:pointer; font-family:'DM Sans',sans-serif; transition:all 0.2s; text-decoration:none; display:inline-block; }
  .add-btn:hover { background:#e04e00; }
  .rating { display:flex; align-items:center; gap:4px; margin-bottom:14px; }
  .stars { color:var(--yellow); font-size:0.85rem; }

  /* EMPTY STATE */
  .empty-state { text-align:center; padding:80px 20px; color:var(--muted); }
  .empty-state .icon { font-size:4rem; margin-bottom:16px; }
  .empty-state h3 { font-family:'Syne',sans-serif; font-size:1.4rem; margin-bottom:8px; color:var(--text); }

  /* LOADING */
  .loading { text-align:center; padding:60px; color:var(--muted); }
  .spinner { width:40px; height:40px; border:3px solid var(--border); border-top-color:var(--orange); border-radius:50%; animation:spin 0.8s linear infinite; margin:0 auto 16px; }

  /* PREMIUM BANNER */
  .premium-banner { margin:0 40px; border-radius:24px; padding:60px 50px; background:linear-gradient(135deg,#FF5C00 0%,#FF2D78 50%,#0057FF 100%); display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:30px; position:relative; overflow:hidden; }
  .premium-banner::before { content:'‚òÖ'; position:absolute; right:-20px; top:-40px; font-size:200px; opacity:0.07; color:#fff; }
  .premium-banner h2 { font-family:'Syne',sans-serif; font-size:2rem; font-weight:800; color:#fff; max-width:500px; line-height:1.2; }
  .premium-banner p { color:rgba(255,255,255,0.8); margin-top:10px; }
  .premium-perks { display:flex; flex-direction:column; gap:8px; margin-top:16px; }
  .perk { display:flex; align-items:center; gap:10px; color:#fff; font-size:0.9rem; }
  .perk::before { content:'‚úì'; background:rgba(255,255,255,0.25); width:22px; height:22px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.75rem; font-weight:700; flex-shrink:0; }
  .btn-white { background:#fff; color:var(--orange); font-weight:700; }

  /* FOOTER */
  footer { margin-top:80px; border-top:1px solid var(--border); padding:50px 40px 30px; display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:40px; }
  .footer-brand p { color:var(--muted); font-size:0.9rem; margin-top:12px; line-height:1.7; max-width:260px; }
  .footer-col h4 { font-family:'Syne',sans-serif; font-size:0.95rem; font-weight:700; margin-bottom:16px; }
  .footer-col a { display:block; color:var(--muted); text-decoration:none; font-size:0.88rem; margin-bottom:10px; transition:color 0.2s; }
  .footer-col a:hover { color:var(--orange); }
  .footer-bottom { border-top:1px solid var(--border); margin-top:40px; padding-top:20px; text-align:center; color:var(--muted); font-size:0.82rem; }

  /* BOTTOM NAV */
  .bottom-nav { display:none; position:fixed; bottom:0; left:0; right:0; background:rgba(14,14,14,0.97); border-top:1px solid var(--border); backdrop-filter:blur(14px); z-index:99; justify-content:space-around; padding:10px 0 16px; }
  .bnav-item { display:flex; flex-direction:column; align-items:center; gap:4px; cursor:pointer; color:var(--muted); font-size:0.68rem; font-weight:600; text-transform:uppercase; }
  .bnav-item .bnav-icon { font-size:1.4rem; }
  .bnav-item.active { color:var(--orange); }

  @keyframes fadeUp { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }
  @keyframes spin { to{transform:rotate(360deg)} }

  @media(max-width:768px) {
    nav { padding:14px 20px; }
    .nav-links { display:none; }
    .nav-right .btn-outline { display:none; }
    .hamburger { display:flex; }
    .hero { padding:60px 20px 50px; }
    .hero h1 { font-size:2.4rem; letter-spacing:-1px; }
    .hero-actions { flex-direction:column; align-items:center; }
    .hero-actions .btn-lg { width:100%; max-width:320px; text-align:center; }
    .search-bar { margin:36px 0 0; }
    .stats { gap:0; padding:0; display:grid; grid-template-columns:1fr 1fr; border:none; }
    .stat { padding:24px 16px; border:1px solid var(--border); }
    .section { padding:40px 16px; }
    .categories { flex-wrap:nowrap; overflow-x:auto; padding-bottom:8px; scrollbar-width:none; }
    .categories::-webkit-scrollbar { display:none; }
    .cat-pill { flex-shrink:0; }
    .products-grid { grid-template-columns:1fr 1fr; gap:14px; }
    .product-img { font-size:2.8rem; }
    .product-body { padding:14px; }
    .product-name { font-size:0.9rem; }
    .product-desc { display:none; }
    .product-price { font-size:1.05rem; }
    .add-btn { padding:8px 12px; font-size:0.78rem; }
    .premium-banner { margin:0 16px; padding:36px 24px; flex-direction:column; text-align:center; }
    footer { grid-template-columns:1fr 1fr; padding:40px 20px 100px; }
    .footer-brand { grid-column:1/-1; }
    .bottom-nav { display:flex; }
  }
  @media(max-width:420px) { .products-grid { grid-template-columns:1fr; } }
</style>
</head>
<body>

<nav>
  <a href="/" class="logo" id="navLogo">Shop<span>Zone</span></a>
  <ul class="nav-links">
    <li><a href="#products">Products</a></li>
    <li><a href="#deals">Deals</a></li>
    <li><a href="#categories">Categories</a></li>
  </ul>
  <div class="nav-right">
    <a href="/login" class="btn btn-outline" style="text-decoration:none">Login</a>
    <a href="/register" class="btn btn-primary" style="text-decoration:none">Register</a>
    <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
  </div>
</nav>

<div class="mobile-menu" id="mobileMenu">
  <button class="mobile-menu-close" id="menuClose">‚úï</button>
  <a href="#products">Products</a>
  <a href="#deals">Deals</a>
  <a href="#categories">Categories</a>
  <button class="btn btn-primary btn-lg" style="margin-top:10px">Get Premium</button>
</div>

<section class="hero">
  <div class="hero-tag" id="heroTag">üî• New products added daily</div>
  <h1 id="heroTitle">Everything You Need,<br><span class="accent">One Place</span> to <span class="accent2">Shop</span></h1>
  <p id="heroDesc">Handpicked products from trusted brands plus exclusive deals you won't find anywhere else.</p>
  <div class="hero-actions">
    <button class="btn btn-primary btn-lg" onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'})">Browse Products</button>
    <button class="btn btn-outline btn-lg">Sell With Us</button>
  </div>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search for anything..."/>
    <button onclick="doSearch()">Search</button>
  </div>
</section>

<div class="stats">
  <div class="stat"><div class="stat-num" id="productCount">0</div><div class="stat-label">Products Listed</div></div>
  <div class="stat"><div class="stat-num">4.8‚òÖ</div><div class="stat-label">Avg. Rating</div></div>
  <div class="stat"><div class="stat-num">98%</div><div class="stat-label">Happy Buyers</div></div>
  <div class="stat"><div class="stat-num">Free</div><div class="stat-label">To Browse</div></div>
</div>

<section class="section" id="categories">
  <div class="section-header">
    <h2 class="section-title">Browse Categories</h2>
  </div>
  <div class="categories" id="categoryList">
    <div class="cat-pill active" onclick="filterCategory('All', this)">All</div>
  </div>
</section>

<section class="section" id="products" style="padding-top:0">
  <div class="section-header">
    <h2 class="section-title">Featured Products</h2>
    <span style="color:var(--muted);font-size:0.9rem" id="productCountLabel"></span>
  </div>
  <div id="productsGrid" class="products-grid">
    <div class="loading"><div class="spinner"></div>Loading products...</div>
  </div>
</section>

<div class="premium-banner" id="deals">
  <div>
    <h2>Go Premium.<br>Get Exclusive Deals.</h2>
    <p>Unlock member-only prices, early access, and zero ads.</p>
    <div class="premium-perks">
      <div class="perk">Exclusive discounts on 500+ products</div>
      <div class="perk">Early access to new arrivals</div>
      <div class="perk">Ad-free browsing experience</div>
    </div>
  </div>
  <div style="text-align:center">
    <div style="font-family:'Syne',sans-serif;font-size:3rem;font-weight:800;color:#fff" id="premiumPrice">‚Çπ199<span style="font-size:1.1rem;font-weight:400">/mo</span></div>
    <div style="color:rgba(255,255,255,0.7);margin-bottom:20px;font-size:0.9rem">7-day free trial included</div>
    <button class="btn btn-white btn-lg">Start Free Trial</button>
  </div>
</div>

<footer>
  <div class="footer-brand">
    <a href="/" class="logo" id="footerLogo">Shop<span>Zone</span></a>
    <p>Your one-stop marketplace for the best products online.</p>
  </div>
  <div class="footer-col"><h4>Shop</h4><a href="#">All Products</a><a href="#">New Arrivals</a><a href="#">Best Sellers</a><a href="#">Deals</a></div>
  <div class="footer-col"><h4>Company</h4><a href="#">About Us</a><a href="#">Sell With Us</a><a href="#">Affiliates</a><a href="#">Contact</a></div>
  <div class="footer-col"><h4>Support</h4><a href="#">Help Center</a><a href="#">Returns</a><a href="/admin-panel" style="color:var(--orange)">Admin Panel</a></div>
</footer>
<div class="footer-bottom">¬© 2025 Weelu. All rights reserved. Built with ‚ù§Ô∏è</div>

<div class="bottom-nav">
  <div class="bnav-item active" onclick="setActive(this)"><span class="bnav-icon">üè†</span>Home</div>
  <div class="bnav-item" onclick="setActive(this);document.getElementById('searchInput').focus()"><span class="bnav-icon">üîç</span>Search</div>
  <div class="bnav-item" onclick="setActive(this);document.getElementById('deals').scrollIntoView({behavior:'smooth'})"><span class="bnav-icon">‚≠ê</span>Deals</div>
  <div class="bnav-item" onclick="setActive(this)"><span class="bnav-icon">üõí</span>Cart</div>
  <div class="bnav-item" onclick="setActive(this);window.location='/admin-panel'"><span class="bnav-icon">üë§</span>Admin</div>
</div>

<script>
let currentCategory = 'All';
let allProducts = [];

// Load settings
async function loadSettings() {
  try {
    const res = await fetch('/api/settings');
    const s = await res.json();
    if (s.site_name) {
      document.title = s.site_name;
      document.getElementById('navLogo').innerHTML = s.site_name.charAt(0) + '<span>' + s.site_name.slice(1) + '</span>';
      document.getElementById('footerLogo').innerHTML = s.site_name.charAt(0) + '<span>' + s.site_name.slice(1) + '</span>';
    }
    if (s.hero_title1 && s.hero_title2) {
      document.getElementById('heroTitle').innerHTML = s.hero_title1 + '<br><span class="accent">' + s.hero_title2.split(' ').slice(0,2).join(' ') + '</span> <span class="accent2">' + s.hero_title2.split(' ').slice(2).join(' ') + '</span>';
    }
    if (s.hero_desc) document.getElementById('heroDesc').textContent = s.hero_desc;
    if (s.primary_color) document.documentElement.style.setProperty('--orange', s.primary_color);
    if (s.accent_color) document.documentElement.style.setProperty('--yellow', s.accent_color);
    if (s.bg_color) document.documentElement.style.setProperty('--dark', s.bg_color);
    if (s.premium_price) document.getElementById('premiumPrice').innerHTML = s.premium_price + '<span style="font-size:1.1rem;font-weight:400">/mo</span>';
  } catch(e) { console.log('Settings load error', e); }
}

// Load categories
async function loadCategories() {
  try {
    const res = await fetch('/api/categories');
    const cats = await res.json();
    const list = document.getElementById('categoryList');
    list.innerHTML = '';
    cats.forEach(cat => {
      const pill = document.createElement('div');
      pill.className = 'cat-pill' + (cat === 'All' ? ' active' : '');
      pill.textContent = cat;
      pill.onclick = () => filterCategory(cat, pill);
      list.appendChild(pill);
    });
  } catch(e) {}
}

// Load products
async function loadProducts(category = 'All', search = '') {
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '<div class="loading"><div class="spinner"></div>Loading products...</div>';
  try {
    let url = '/api/products?';
    if (category !== 'All') url += 'category=' + encodeURIComponent(category) + '&';
    if (search) url += 'search=' + encodeURIComponent(search);
    const res = await fetch(url);
    allProducts = await res.json();
    document.getElementById('productCount').textContent = allProducts.length + '+';
    document.getElementById('productCountLabel').textContent = allProducts.length + ' products found';
    renderProducts(allProducts);
  } catch(e) {
    grid.innerHTML = '<div class="empty-state"><div class="icon">‚ö†Ô∏è</div><h3>Could not load products</h3><p>Make sure the server is running</p></div>';
  }
}

function renderProducts(products) {
  const grid = document.getElementById('productsGrid');
  if (!products.length) {
    grid.innerHTML = '<div class="empty-state"><div class="icon">üì¶</div><h3>No products yet</h3><p>Go to the admin panel to add your first product!</p></div>';
    return;
  }
  grid.innerHTML = products.map(p => `
    <div class="product-card" onclick="if(event.target.tagName!=='A'&&event.target.tagName!=='BUTTON'){}">
      <div class="product-img">
        ${p.emoji || 'üì¶'}
        <span class="badge ${p.type === 'affiliate' ? 'badge-affiliate' : 'badge-own'}">${p.type === 'affiliate' ? 'Affiliate' : 'My Product'}</span>
        ${p.hot ? '<span class="badge-hot">HOT</span>' : ''}
      </div>
      <div class="product-body">
        <div class="product-cat">${p.category}</div>
        <div class="product-name">${p.name}</div>
        <div class="rating"><span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></div>
        ${p.description ? `<div class="product-desc">${p.description}</div>` : ''}
        <div class="product-footer">
          <div>
            <div class="product-price">${p.price}${p.old_price ? ` <span class="old">${p.old_price}</span>` : ''}</div>
            ${p.commission ? `<div class="product-commission">You earn: ${p.commission}</div>` : ''}
          </div>
          <a class="add-btn" href="${p.link || '#'}" target="_blank" onclick="event.stopPropagation()">Buy Now</a>
        </div>
      </div>
    </div>
  `).join('');
}

function filterCategory(cat, el) {
  currentCategory = cat;
  document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  loadProducts(cat, document.getElementById('searchInput').value);
}

function doSearch() {
  const q = document.getElementById('searchInput').value.trim();
  if (q) { window.location.href = '/search?q=' + encodeURIComponent(q); return; }
  loadProducts(currentCategory, document.getElementById('searchInput').value);
}

document.getElementById('searchInput').addEventListener('keydown', e => {
  if (e.key === 'Enter') doSearch();
});

// Nav
document.getElementById('hamburger').addEventListener('click', () => {
  document.getElementById('hamburger').classList.toggle('open');
  document.getElementById('mobileMenu').classList.toggle('open');
});
document.getElementById('menuClose').addEventListener('click', () => {
  document.getElementById('hamburger').classList.remove('open');
  document.getElementById('mobileMenu').classList.remove('open');
});
document.querySelectorAll('.mobile-menu a').forEach(a => a.addEventListener('click', () => {
  document.getElementById('hamburger').classList.remove('open');
  document.getElementById('mobileMenu').classList.remove('open');
}));

function setActive(el) {
  document.querySelectorAll('.bnav-item').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
}

// Init
loadSettings();
loadCategories();
loadProducts();
</script>
</body>
</html>
